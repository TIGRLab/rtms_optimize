# rtms_optimize
Repo for building rTMS coil optimization method
*** 
# Mesh Correspondence between Surfaces 
***
## Construction of simNIBS optimized mesh geometry and comparison to fs_LR_32k

#### Objective:
Establish a correspondence between the individualized functional network parcellation embedded in **fs_LR_32k** space and the optimized mesh generated by the simNIBS re-meshing algorithm.  

#### Requirements:
Since we're modelling the grey matter and the volumetric mesh contains representations for different tissue types, we don't just want a surface projection but a **surface to discrete volume projection**, since this will better model the regions that we want to stimulate since it will have finite volume. 

#### Methods:

##### Ribbon Constrained Projection
Since we're looking for a volumetric representation, the most direct way would be to project the **fs_LR_32k** mesh onto some kind of volumetric representation, then map it back via projection from cortical ribbon onto the tetrahedral mesh. The nice thing about this is that it will handle the grey-matter finite volume issue, maintain tissue topography (check with Erin), and map directly back and forth between the two layers. In addition, since the parcellation is binary we don't have to worry about signal smearing (but do we want to model the signal inside the parcel????). 

#### Implementational Steps:
##### Parcel Approach
- [ ] generate optimized meshes for a bunch of rTMSWM participants. 
- [ ] use wb_command's ribbon projection into volumetric space of the parcel data
- [ ] get a projection mapping (somehow) onto the optimized mesh
- [ ] Set up an optimization framework wrapper around this...
- [ ] Alternatively, force simNIBS to use the surface path generated by ciftify (although it doesn't fit white matter I think...) 

#### Considerations
- Parcel optimization vs signal optimization, we need to figure out how we'll specify which target to use
- A direct approach via surface resampling techniques, although would require the assumption of full-thickness grey-matter containers which might actually be okay... 


